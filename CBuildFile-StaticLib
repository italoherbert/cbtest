$version=1.0
$arch=x64

IFWIN32
    $so=windows
ENDIF
IFNOWIN32
    $so=linux
ENDIF

compiler=g++
archiver=ar
output.file.name=libcbtest.a

src.dir=src
build.dir=build/cbtest-$(version)-$(so)-$(arch)

bin.dir=bin/Release
obj.dir=obj/Release/archive
compiler.params=-Wall -O2 -std=c++17
archiver.params=

task copy after
    IFWIN32
        mkdir -p lib/windows
        cp $(build.dir)/$(output.file.name) lib/windows/$(output.file.name)
    ENDIF
    IFNOWIN32
        mkdir -p lib/linux
        cp $(build.dir)/$(output.file.name) lib/linux/$(output.file.name)
    ENDIF
endtask