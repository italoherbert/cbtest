$version=1.0
$arch=x64

IF os == "windows"
    $soname=windows
ENDIF
IF os != "windows"
    $soname=linux
ENDIF

compiler=g++
archiver=ar
output.file.name=libcbtest.a

src.dir=src
build.dir=build/cbtest-$(version)-$(soname)-$(arch)

bin.dir=bin/Release
obj.dir=obj/Release/archive
compiler.params=-Wall -O2 -std=c++17
archiver.params=

task copy after
    mkdir -p lib/$(soname)
    cp $(build.dir)/$(output.file.name) lib/$(soname)/$(output.file.name)    
endtask