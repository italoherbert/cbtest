<!DOCTYPE html>

<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Página oficial do xutest - get started - calculadora - um exemplo completo">
    <meta name="keyworks" content="xutest, testes, unitários, unidade, unit, test, windows, linux, foxmake, c, c++">
    <meta name="author" content="Ítalo Herbert Siqueira Gabriel">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="../lib/fontawesome/all.min.css" rel="stylesheet">
    <link href="../lib/prism/prism.css" rel="stylesheet">
    <link href="../style/style.css" rel="stylesheet">
    
    <title>Calculadora - um exemplo completo - xutest - Site oficial</title>

    <script src="../lib/jquery-3.7.1.min.js"></script>    
    <script src="../lib/fontawesome/all.min.js"></script>
    <script src="../js/main.js"></script>
</head>

<body>
    <nav id="nav"></nav>

<div class="d-flex flex-nowrap">
    <aside id="aside"></aside>
    <main>
        <article>
            <header>
                <h1 class="text-center">Calculadora - um exemplo completo</h1>
            </header>

            <article>
                <p>Agora vamos a um exemplo completo de uma calculadora de áreas.</p>

                <p>Para esse exemplo, é necessário o foxmake instalado na sua máquina 
                (ou ele incluído no seu projeto). Acesse a página do projeto em:
                <a href="https://italolab.github.io/foxmake">documentação do foxmake</a>.
                </p>

                <p>Vamos lá: </p>
                <ol>
                    <li>Crie um o arquivo "calc.h" com o seguinte conteúdo: <br /><br />

                        <b><i>src/calc/calc.h</i></b><br />
<pre class="line-numbers"><code class="language-cpp">#ifndef CALC_H
#define CALC_H

namespace calc {

    double square_area( double side );

    double rectangle_area( double base, double height );

    double triangle_area( double base, double height );
    
    double circle_area( double radius );

}

#endif
</code></pre>
                    </li>

                    <li>Agora crie o seguinte arquivo "calc.cpp" o seguinte conteúdo: <br /><br />

                        <b><i>src/calc/calc.cpp</i></b><br />
        
<pre class="line-numbers"><code class="language-cpp">#include "calc.h"

#include &lt;cmath&gt;

namespace calc {
    
    double square_area( double side ) {
        return side * side;
    }

    double rectangle_area( double base, double height ) {
        return base * height;
    }

    double triangle_area( double base, double height ) {
        return ( base * height ) / 2.0f;
    }

    double circle_area( double radius ) {
        return M_PI * pow( radius, 2.0f );
    }

}
</code></pre>
                    </li>

                    <li>Crie agora o arquivo main.cpp com o seguinte conteúdo: <br /><br />

                        <b><i>src/main.cpp</i></b><br />
<pre class="line-numbers"><code class="language-cpp">#include "calc/calc.h"

#include &lt;iostream&gt;
#include &lt;iomanip&gt;

using namespace std;

int main() {
    cout &lt;&lt; "  Calculadora de areas" &lt;&lt; endl;
    cout &lt;&lt; endl;
    cout &lt;&lt; "  (1) Area do quadrado" &lt;&lt; endl;
    cout &lt;&lt; "  (2) Area do retangulo" &lt;&lt; endl;
    cout &lt;&lt; "  (3) Area do triangulo" &lt;&lt; endl;
    cout &lt;&lt; "  (4) Area do circulo" &lt;&lt; endl;
    cout &lt;&lt; endl;

    int op;
    cout &lt;&lt; "Informe a opcao >> " &lt;&lt; std::flush;
    cin >> op;

    cout &lt;&lt; endl;

    double side;
    double base;
    double height;
    double radius;
    double area;

    cout &lt;&lt; std::fixed &lt;&lt; std::setprecision( 4 );

    switch ( op ) {
        case 1:
            cout &lt;&lt; "Informe o lado do quadrado: " &lt;&lt; std::flush;
            cin >> side;
            
            area = calc::square_area( side );

            cout &lt;&lt; endl;
            cout &lt;&lt; "A area do quadrado eh: " &lt;&lt; area &lt;&lt; endl;
            break;
        case 2:
            cout &lt;&lt; "Informe a base do retangulo: " &lt;&lt; std::flush;
            cin >> base;
            cout &lt;&lt; "Informe a altura do retangulo: " &lt;&lt; std::flush;
            cin >> height;

            area = calc::rectangle_area( base, height );

            cout &lt;&lt; endl;
            cout &lt;&lt; "A area do retangulo eh: " &lt;&lt; area &lt;&lt; endl;
            break;
        case 3:
            cout &lt;&lt; "Informe a base do triangulo: " &lt;&lt; std::flush;
            cin >> base;
            cout &lt;&lt; "Informe a altura do triangulo: " &lt;&lt; std::flush;
            cin >> height;

            area = calc::triangle_area( base, height );

            cout &lt;&lt; endl;
            cout &lt;&lt; "A area do triangulo eh: " &lt;&lt; area &lt;&lt; endl;
            break;
        case 4:
            cout &lt;&lt; "Informe o raio do circulo: " &lt;&lt; std::flush;
            cin >> radius;
            
            area = calc::circle_area( radius );

            cout &lt;&lt; endl;
            cout &lt;&lt; "A area do circulo eh: " &lt;&lt; area &lt;&lt; endl;
            break;
        default:
            cout &lt;&lt; "Voce informou uma opcao invalida." &lt;&lt; endl;
    }

    cout &lt;&lt; endl;
    cout &lt;&lt; "Fim do calculo de area..." &lt;&lt; endl;
}
</code></pre>
                    </li>

                    <li>Agora vamos criar os arquivos de teste. <br />
                        Crie o arquivo "calctests.h" com o seguinte conteúdo: <br /><br />
                        
                        <b><i>test/calc/calctests.h</i></b><br />
<pre class="line-numbers"><code class="language-cpp">#include &lt;xutest/xutest.h&gt;

#include "calc/calc.h"
#include &lt;cmath&gt;

TEST_CASE( square_area_test, CalcTests ) {
    ASSERT_EQUALS( calc::square_area( 10 ), 100, );
    ASSERT_EQUALS( calc::square_area( -1 ), 1, );
    ASSERT_EQUALS( calc::square_area( 0 ), 0, );
    ASSERT_EQUALS( calc::square_area( 2.5 ), 6.25, );
}

TEST_CASE( rectangle_area_test, CalcTests ) {
    ASSERT_EQUALS( calc::rectangle_area( 10, 10 ), 100, );
    ASSERT_EQUALS( calc::rectangle_area( -1, 20 ), -20, );
    ASSERT_EQUALS( calc::rectangle_area( 0, 10 ), 0, );
    ASSERT_EQUALS( calc::rectangle_area( 2.5, 10 ), 25, );
}

TEST_CASE( triangle_area_test, CalcTests ) {
    ASSERT_EQUALS( calc::triangle_area( 10, 10 ), 50, );
    ASSERT_EQUALS( calc::triangle_area( -1, 20 ), -10, );
    ASSERT_EQUALS( calc::triangle_area( 0, 10 ), 0, );
    ASSERT_EQUALS( calc::triangle_area( 2.5, 10 ), 12.5, );
}

TEST_CASE( circle_area_test, CalcTests ) {
    ASSERT_EQUALS( calc::circle_area( 10 ), M_PI * 100, );
    ASSERT_EQUALS( calc::circle_area( -1 ), M_PI, );
    ASSERT_EQUALS( calc::circle_area( 0 ), 0, );
    ASSERT_EQUALS( calc::circle_area( 2.5 ), M_PI * 6.25, );
}
</code></pre>
                    </li>

                    <li>Agora crie o arquivo "main.cpp" na pasta "test" com o seguinte conteúdo: <br /><br />

                        <b><i>test/main.cpp</i></b>
<pre class="line-numbers"><code class="language-cpp">#include "calc/calctests.h"

#include &lt;xutest/xutest.h&gt;

int main() {
    RUN_ALL_TEST_CASES();
    return 0;
}
</code></pre>
                    </li>

                    <li>Agora só falta o arquivo foxmakeFile. Crie ele com o seguinte conteúdo: <br /><br />

                        <b><i>foxmakeFile</i></b><br />
<pre class="line-numbers"><code>IF os == "windows"
    output.file.name=calculator.exe
ENDIF
IF os != "windows"
    output.file.name=calculator
ENDIF

src.dir=src
test.dir=test
build.dir=build
obj.dir=obj
bin.dir=bin

IF os != "windows"
    test.linker.params=-ldl -rdynamic
ENDIF

test.libs=xutest
</code></pre>
                    </li>
                </ol>

                <p>Feito isso você deve ter a seguinte estrutura de arquivos em seu projeto: </p>

<pre>
calculator
├── foxmakeFile
├── src
│   ├── calc
│   │   ├── calc.cpp
│   │   └── calc.h
│   └── main.cpp
└── test
    ├── calc
    │   └── calctests.h
    └── main.cpp
</pre>

                <p>Agora você pode executar o build com foxmake. Execute o seguinte: </p>

<pre><code>foxmake testbuildall</code></pre>

                <p>Você deverá ver a seguinte saída: </p>

                <figure>
                    <img src="../images/calculator-example-tests-output.png" />
                </figure>

                <p>Se quiser rodar o projeto, execute: </p>

<pre><code>foxmake buildall
./build/calculator
</code></pre>

                <p>Se estiver no windows, substitua ./build/calculator por .\build\calculator.exe</p>
                
                <p>Agora você deve ver a seguinte saída: </p>

                <figure>
                    <img src="../images/calculator-example-output.png" />
                </figure>

                <section>
                    <h5>Como rodar sem o foxmake</h5>

                    <p>Para rodar sem o foxmake, você pode colocar o conteúdo dos testes na pasta 
                        src e utilizar os argumentos da linha de comandos para executar os testes 
                        caso, por exemplo, seja passado o argumento "test". Vamos ao exemplo. Você 
                        pode fazer o seguinte:

<pre class="line-numbers"><code class="language-cpp">#include "test/calctests.h"

#include &lt;xutest/xutest.h&gt;
#include &lt;cstring&gt;

/* Código do main.cpp */

int main( int argc, char* argv[] ) {
    if ( argc == 2 ) {
        if ( strcmp( argv[ 1 ], "test" ) == 0 ) {
            RUN_ALL_TEST_CASES();
            return 0;
        }
    }

    /* Restante do código fonte do main.cpp */
    return 0;
}

</code></pre>
    
                    </p>
                </section>

                <p>Para baixar o exemplo desta página, acesse: </p>
                <p>
                    <b>Download</b>: 
                    <a href="../files/calculator.zip">calculator.zip</a>.
                </p>
            </article>

            <section>
                <h3>Finalizando...</h3>

                <p>E assim chegamos ao final do exemplo de calculadora de áreas completo. 
                Espero que tenha gostado das aulas e, agora, divirta-se com o xutest e, o 
                foxmake combina muito bem com ele!</p>
            </section>

            <footer class="d-flex justify-content-between">
                <a class="btn btn-dark" href="macros-and-asserts.html">
                    Anterior
                </a>
                <a class="btn btn-dark" href="index.html">
                    Cima
                </a>            
                <span></span>
            </footer>
        </article>
    </main>
</div>

    <footer>
        <span id="footer"></span>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="../lib/prism/prism.js"></script>
</body>

</html>